[[https://www.repostatus.org/badges/latest/wip.svg][https://www.repostatus.org/badges/latest/wip.svg]]
[[https://www.gnu.org/licenses/gpl-3.0][https://img.shields.io/badge/License-GPLv3-blue.svg]]
[[https://github.com/openosmia/snowlaps-emulator/actions][file:https://github.com/openosmia/snowlaps-emulator/workflows/CI/badge.svg]]
[[https://github.com/psf/black][https://img.shields.io/badge/code%20style-black-000000.svg]]

* snowlaps ‚ùÑÔ∏èü¶†üèîÔ∏è

=snowlaps= is a Python package built on a deep learning emulator of
the two-stream radiative transfer model [[https://biosnicar.vercel.app/][biosnicar]]. It was originally
developed to study the impact of different Light Absorbing Particles
(LAPs) on snow spectral albedo as part of a [[https://doi.org/10.5194/egusphere-2024-2583][research project]] in
Southern Norway. Now, =snowlaps= has grown into a library with two
main use cases.

- *forward mode*: predict snow spectral albedo from prescribed surface
  properties as a fast alternative to [[https://biosnicar.vercel.app/][biosnicar]].
- *inverse mode*: infer surface properties from snow spectral albedo
  observations.

* Installation

=snowlaps= can be installed via the command line with [[https://docs.conda.io/en/latest/][conda]] and [[https://pip.pypa.io/en/stable/][pip]]:

#+begin_src shell :results verbatim

# clone repository in the folder of your choice
git clone git@github.com:openosmia/snowlaps.git

# move into snowlaps directory
cd snowlaps

# create conda environment
conda env create -f environment.yml

# activate conda environment
conda activate snowlaps

# install snowlaps
pip install -e .

#+end_src

Installation can be sped up using the fast cross-platform package
manager [[https://mamba.readthedocs.io/en/latest/][mamba]] (reimplementation of the conda package manager in C++),
simply use =mamba= instead of =conda= in the instructions above.

* Usage

=snowlaps= can be used directly as a Python package or interactively
via a Streamlit app.

** Running the code

Example scripts are provided in [[https://github.com/openosmia/snowlaps/tree/main/examples][snowlaps/examples]].

- *example 1*: forward run of the snowlaps emulator
- *example 2*: inversion of hyperspectral albedo measurements
- *example 3*: comparison of snowlaps and biosnicar predictions

** Using the app

The Streamlit app can be run locally via the terminal:

#+begin_src shell :results verbatim

# move into snowlaps directory
cd snowlaps

# start Streamlit app on http://localhost:8501
./start_app.sh

#+end_src


[[./data/assets/app_forward.png]]

* Contributions

Any contribution to =snowlaps= is welcome! Feel free to add new issues, open pull requests or ask questions in the discussion forum. 

* Citation

If you use this code, please cite the associated publication: 

Chevrollier, L.-A., Wehrl√©, A., Cook, J. M., Pirk, N., Benning, L. G., Anesio, A. M., and Tranter, M.: Separating the albedo reducing effect of different light absorbing particles on snow using deep learning, EGUsphere [preprint], https://doi.org/10.5194/egusphere-2024-2583, 2024. 

